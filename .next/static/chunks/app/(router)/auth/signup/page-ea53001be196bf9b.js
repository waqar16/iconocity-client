(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[919],{9075:function(e,t,r){Promise.resolve().then(r.bind(r,9548))},8735:function(e,t,r){"use strict";r.d(t,{GoogleOAuthProvider:function(){return i},Nq:function(){return l}});var n=r(2265);let o=(0,n.createContext)(null);function i(e){let{clientId:t,nonce:r,onScriptLoadSuccess:i,onScriptLoadError:l,children:u}=e,c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{nonce:t,onScriptLoadSuccess:r,onScriptLoadError:o}=e,[i,l]=(0,n.useState)(!1),u=(0,n.useRef)(r);u.current=r;let c=(0,n.useRef)(o);return c.current=o,(0,n.useEffect)(()=>{let e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.nonce=t,e.onload=()=>{var e;l(!0),null===(e=u.current)||void 0===e||e.call(u)},e.onerror=()=>{var e;l(!1),null===(e=c.current)||void 0===e||e.call(c)},document.body.appendChild(e),()=>{document.body.removeChild(e)}},[t]),i}({nonce:r,onScriptLoadSuccess:i,onScriptLoadError:l}),a=(0,n.useMemo)(()=>({clientId:t,scriptLoadedSuccessfully:c}),[t,c]);return n.createElement(o.Provider,{value:a},u)}function l(e){let{flow:t="implicit",scope:r="",onSuccess:i,onError:l,onNonOAuthError:u,overrideScope:c,state:a,...s}=e,{clientId:d,scriptLoadedSuccessfully:f}=function(){let e=(0,n.useContext)(o);if(!e)throw Error("Google OAuth components must be used within GoogleOAuthProvider");return e}(),v=(0,n.useRef)(),h=(0,n.useRef)(i);h.current=i;let p=(0,n.useRef)(l);p.current=l;let m=(0,n.useRef)(u);m.current=u,(0,n.useEffect)(()=>{var e,n;if(!f)return;let o="implicit"===t?"initTokenClient":"initCodeClient",i=null===(n=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===n?void 0:n.oauth2[o]({client_id:d,scope:c?r:"openid profile email ".concat(r),callback:e=>{var t,r;if(e.error)return null===(t=p.current)||void 0===t?void 0:t.call(p,e);null===(r=h.current)||void 0===r||r.call(h,e)},error_callback:e=>{var t;null===(t=m.current)||void 0===t||t.call(m,e)},state:a,...s});v.current=i},[d,f,t,r,a]);let g=(0,n.useCallback)(e=>{var t;return null===(t=v.current)||void 0===t?void 0:t.requestAccessToken(e)},[]),w=(0,n.useCallback)(()=>{var e;return null===(e=v.current)||void 0===e?void 0:e.requestCode()},[]);return"implicit"===t?g:w}},9548:function(e,t,r){"use strict";r.d(t,{default:function(){return p}});var n=r(7437);r(2265);var o=r(9733),i=r(8137),l=r(1169),u=r(3811),c=r(9555);let a=async e=>(await u.Z.post("auth/signUpWithGoogle/",e)).data,s=()=>(0,c.useMutation)({mutationFn:a});var d=r(8735),f=r(7776),v=r(2649),h=r(8472),p=()=>{let e=(0,l.useRouter)(),{mutate:t,isLoading:r}=s(),u=(0,d.Nq)({onSuccess:async e=>{try{let t=await c(e.access_token);t&&a(t)}catch(e){f.A.error("Failed to fetch profile information.")}},onError:e=>f.A.error("Login Failed: ".concat(e.message))}),c=async e=>{try{return(await h.Z.get("https://www.googleapis.com/oauth2/v1/userinfo?access_token=".concat(e),{headers:{Authorization:"Bearer ".concat(e),Accept:"application/json"}})).data}catch(e){return console.error("Error fetching profile info",e),null}},a=r=>{t({email:r.email,full_name:r.name,profile_image:r.picture},{onSuccess:t=>{v.Z.set("token",t.token),v.Z.set("email",r.email),v.Z.set("full_name",r.name),v.Z.set("profile_image",r.picture),e.push("/dashboard/generate")},onError:e=>{var t,r;f.A.error((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error)||"An error occurred.")}})};return(0,n.jsxs)(o.z,{className:"w-[300px] h-14 flex gap-3 text-base text-[#000] hover:text-white bg-[#F8F8F8] hover:bg-transparent hover:border border-white rounded-[8px] mt-16",onClick:()=>{u()},disabled:r,children:[(0,n.jsx)(i.P.AuthGoogleIcon,{}),"Signup with Google"]})}}},function(e){e.O(0,[249,242,801,830,971,23,744],function(){return e(e.s=9075)}),_N_E=e.O()}]);